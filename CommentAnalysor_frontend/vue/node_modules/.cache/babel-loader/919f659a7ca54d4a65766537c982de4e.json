{"remainingRequest":"D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\src\\views\\Home.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\src\\views\\Home.vue","mtime":1746968722604},{"path":"D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\babel.config.js","mtime":1746756434702},{"path":"D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746972278158},{"path":"D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1746972279218},{"path":"D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746972278158},{"path":"D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1746972279591}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZmlsdGVyLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdIb21lJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcHJvZHVjdFVybDogJycsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBzZWFyY2hIaXN0b3J5OiBbXQogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICAvL3RoaXMubG9hZFNlYXJjaEhpc3RvcnkoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGxvYWRTZWFyY2hIaXN0b3J5KCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KCcvc2VhcmNoL2hpc3RvcnknKTsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5jb2RlID09PSAnMCcpIHsKICAgICAgICAgIHRoaXMuc2VhcmNoSGlzdG9yeSA9IHJlc3BvbnNlLmRhdGEuZGF0YTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlICYmIGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA0KSB7CiAgICAgICAgICBjb25zb2xlLmxvZygn5pCc57Si5Y6G5Y+y5Yqf6IO95pqC5pyq5a6e546wJyk7CiAgICAgICAgICB0aGlzLnNlYXJjaEhpc3RvcnkgPSBbXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5lcnJvcign5Yqg6L295pCc57Si5Y6G5Y+y5aSx6LSlOicsIGVycm9yKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBxdWVyeVNlYXJjaChxdWVyeVN0cmluZywgY2FsbGJhY2spIHsKICAgICAgY29uc3QgcmVzdWx0cyA9IHRoaXMuc2VhcmNoSGlzdG9yeS5maWx0ZXIoaXRlbSA9PiB7CiAgICAgICAgcmV0dXJuIGl0ZW0ucHJvZHVjdE5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeVN0cmluZy50b0xvd2VyQ2FzZSgpKSB8fCBpdGVtLnByb2R1Y3RVcmwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeVN0cmluZy50b0xvd2VyQ2FzZSgpKTsKICAgICAgfSk7CiAgICAgIGNhbGxiYWNrKHJlc3VsdHMpOwogICAgfSwKICAgIGhhbmRsZVNlbGVjdChpdGVtKSB7CiAgICAgIHRoaXMucHJvZHVjdFVybCA9IGl0ZW0ucHJvZHVjdFVybDsKICAgICAgdGhpcy5hbmFseXplQ29tbWVudHMoKTsKICAgIH0sCiAgICBhc3luYyBhbmFseXplQ29tbWVudHMoKSB7CiAgICAgIGlmICghdGhpcy5wcm9kdWN0VXJsKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fovpPlhaXkuqzkuJzllYblk4FVUkwnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKCiAgICAgIC8vIOaPkOWPluWVhuWTgUlECiAgICAgIGxldCBwcm9kdWN0SWQgPSB0aGlzLmV4dHJhY3RQcm9kdWN0SWQodGhpcy5wcm9kdWN0VXJsKTsKICAgICAgaWYgKHByb2R1Y3RJZCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAvLyDlhYjojrflj5bor4TorrrmlbDmja4KICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KCcvY29tbWVudHMvZmV0Y2gnLCB7CiAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgIHVybDogdGhpcy5wcm9kdWN0VXJsCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY29kZSA9PT0gJzAnKSB7CiAgICAgICAgICAgIC8vIOWwneivleS/neWtmOaQnOe0ouWOhuWPsu+8jOWmguaenOWksei0peS5n+S4jeW9seWTjeS4u+imgeWKn+iDvQogICAgICAgICAgICAvLyB0cnkgewogICAgICAgICAgICAvLyAgIGF3YWl0IGF4aW9zLnBvc3QoJy9zZWFyY2gvaGlzdG9yeScsIHsKICAgICAgICAgICAgLy8gICAgIHByb2R1Y3RJZCwKICAgICAgICAgICAgLy8gICAgIHByb2R1Y3RVcmw6IHRoaXMucHJvZHVjdFVybAogICAgICAgICAgICAvLyAgIH0pOwogICAgICAgICAgICAvLyB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKCfkv53lrZjmkJzntKLljoblj7LlpLHotKXvvIzkvYbkuI3lvbHlk43kuLvopoHlip/og70nKTsKICAgICAgICAgICAgLy8gfQoKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfor4Torrrojrflj5bmiJDlip8nKTsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgIG5hbWU6ICdhbmFseXNpcycsCiAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICBwcm9kdWN0SWQKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgICB1cmw6IHRoaXMucHJvZHVjdFVybAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlc3BvbnNlLmRhdGEubXNnIHx8ICfor4Torrrojrflj5blpLHotKUnKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgdmFyIF9lcnJvciRyZXNwb25zZTsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPluivhOiuuuWksei0pTonLCBlcnJvcik7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfojrflj5bor4TorrrlpLHotKU6ICcgKyAoKChfZXJyb3IkcmVzcG9uc2UgPSBlcnJvci5yZXNwb25zZSkgPT09IG51bGwgfHwgX2Vycm9yJHJlc3BvbnNlID09PSB2b2lkIDAgfHwgKF9lcnJvciRyZXNwb25zZSA9IF9lcnJvciRyZXNwb25zZS5kYXRhKSA9PT0gbnVsbCB8fCBfZXJyb3IkcmVzcG9uc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lcnJvciRyZXNwb25zZS5tc2cpIHx8IGVycm9yLm1lc3NhZ2UpKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5peg5pWI55qE5Lqs5Lic5ZWG5ZOBVVJM77yM6K+35qOA5p+l5qC85byPJyk7CiAgICAgIH0KICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICB9LAogICAgZXh0cmFjdFByb2R1Y3RJZCh1cmwpIHsKICAgICAgY29uc3QgcmVnZXggPSAvXC8oXGQrKVwuaHRtbC87CiAgICAgIGNvbnN0IG1hdGNoID0gdXJsLm1hdGNoKHJlZ2V4KTsKICAgICAgcmV0dXJuIG1hdGNoID8gbWF0Y2hbMV0gOiBudWxsOwogICAgfQogIH0KfTs="},{"version":3,"names":["axios","name","data","productUrl","loading","searchHistory","created","methods","loadSearchHistory","response","get","code","error","status","console","log","querySearch","queryString","callback","results","filter","item","productName","toLowerCase","includes","handleSelect","analyzeComments","$message","warning","productId","extractProductId","params","url","success","$router","push","query","msg","_error$response","message","regex","match"],"sources":["src/views/Home.vue"],"sourcesContent":["<template>\r\n  <div class=\"home-container\">\r\n    <div class=\"search-box\">\r\n      <h1>JD评论分析系统</h1>\r\n      <div class=\"input-group\">\r\n        <el-autocomplete\r\n          v-model=\"productUrl\"\r\n          :fetch-suggestions=\"querySearch\"\r\n          class=\"url-input\"\r\n          placeholder=\"请输入京东商品URL...\"\r\n          @select=\"handleSelect\"\r\n          @keyup.enter.native=\"analyzeComments\"\r\n        >\r\n          <template #default=\"{ item }\">\r\n            <div class=\"suggestion-item\">\r\n              <div class=\"product-name\">{{ item.productName }}</div>\r\n              <div class=\"product-url\">{{ item.productUrl }}</div>\r\n            </div>\r\n          </template>\r\n        </el-autocomplete>\r\n        <button class=\"search-button\" @click=\"analyzeComments\">\r\n          <i class=\"el-icon-search\"></i> 分析评论\r\n        </button>\r\n      </div>\r\n      <div class=\"examples\">\r\n        <p>示例: https://item.jd.com/10132276662024.html</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'Home',\r\n  data() {\r\n    return {\r\n      productUrl: '',\r\n      loading: false,\r\n      searchHistory: []\r\n    }\r\n  },\r\n  created() {\r\n    //this.loadSearchHistory();\r\n  },\r\n  methods: {\r\n    async loadSearchHistory() {\r\n      try {\r\n        const response = await axios.get('/search/history');\r\n        if (response.data.code === '0') {\r\n          this.searchHistory = response.data.data;\r\n        }\r\n      } catch (error) {\r\n        if (error.response && error.response.status === 404) {\r\n          console.log('搜索历史功能暂未实现');\r\n          this.searchHistory = [];\r\n        } else {\r\n          console.error('加载搜索历史失败:', error);\r\n        }\r\n      }\r\n    },\r\n    \r\n    querySearch(queryString, callback) {\r\n      const results = this.searchHistory.filter(item => {\r\n        return item.productName.toLowerCase().includes(queryString.toLowerCase()) ||\r\n               item.productUrl.toLowerCase().includes(queryString.toLowerCase());\r\n      });\r\n      callback(results);\r\n    },\r\n    \r\n    handleSelect(item) {\r\n      this.productUrl = item.productUrl;\r\n      this.analyzeComments();\r\n    },\r\n    \r\n    async analyzeComments() {\r\n      if (!this.productUrl) {\r\n        this.$message.warning('请输入京东商品URL');\r\n        return;\r\n      }\r\n      \r\n      this.loading = true;\r\n      \r\n      // 提取商品ID\r\n      let productId = this.extractProductId(this.productUrl);\r\n      \r\n      if (productId) {\r\n        try {\r\n          // 先获取评论数据\r\n          const response = await axios.get('/comments/fetch', {\r\n            params: { url: this.productUrl }\r\n          });\r\n          \r\n          if (response.data.code === '0') {\r\n            // 尝试保存搜索历史，如果失败也不影响主要功能\r\n            // try {\r\n            //   await axios.post('/search/history', {\r\n            //     productId,\r\n            //     productUrl: this.productUrl\r\n            //   });\r\n            // } catch (error) {\r\n            //   console.log('保存搜索历史失败，但不影响主要功能');\r\n            // }\r\n            \r\n            this.$message.success('评论获取成功');\r\n            this.$router.push({\r\n              name: 'analysis',\r\n              params: { productId },\r\n              query: { url: this.productUrl }\r\n            });\r\n          } else {\r\n            this.$message.error(response.data.msg || '评论获取失败');\r\n          }\r\n        } catch (error) {\r\n          console.error('获取评论失败:', error);\r\n          this.$message.error('获取评论失败: ' + (error.response?.data?.msg || error.message));\r\n        }\r\n      } else {\r\n        this.$message.error('无效的京东商品URL，请检查格式');\r\n      }\r\n      \r\n      this.loading = false;\r\n    },\r\n    \r\n    extractProductId(url) {\r\n      const regex = /\\/(\\d+)\\.html/;\r\n      const match = url.match(regex);\r\n      return match ? match[1] : null;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.home-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100vh;\r\n  background-color: #f5f7fa;\r\n}\r\n\r\n.search-box {\r\n  width: 650px;\r\n  padding: 40px;\r\n  background-color: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n  text-align: center;\r\n}\r\n\r\nh1 {\r\n  margin-bottom: 30px;\r\n  color: #409EFF;\r\n  font-size: 32px;\r\n}\r\n\r\n.input-group {\r\n  display: flex;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.url-input {\r\n  flex: 1;\r\n  padding: 12px 15px;\r\n  border: 1px solid #dcdfe6;\r\n  border-radius: 4px 0 0 4px;\r\n  font-size: 16px;\r\n  outline: none;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\n.url-input:focus {\r\n  border-color: #409EFF;\r\n}\r\n\r\n.search-button {\r\n  padding: 0 20px;\r\n  background-color: #409EFF;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 0 4px 4px 0;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.search-button:hover {\r\n  background-color: #66b1ff;\r\n}\r\n\r\n.examples {\r\n  color: #909399;\r\n  font-size: 14px;\r\n  text-align: left;\r\n}\r\n\r\n.suggestion-item {\r\n  padding: 8px 0;\r\n}\r\n\r\n.product-name {\r\n  font-size: 14px;\r\n  color: #303133;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.product-url {\r\n  font-size: 12px;\r\n  color: #909399;\r\n}\r\n\r\n.url-input {\r\n  width: 100%;\r\n}\r\n</style> "],"mappings":";;;AAgCA,OAAAA,KAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,UAAA;MACAC,OAAA;MACAC,aAAA;IACA;EACA;EACAC,QAAA;IACA;EAAA,CACA;EACAC,OAAA;IACA,MAAAC,kBAAA;MACA;QACA,MAAAC,QAAA,SAAAT,KAAA,CAAAU,GAAA;QACA,IAAAD,QAAA,CAAAP,IAAA,CAAAS,IAAA;UACA,KAAAN,aAAA,GAAAI,QAAA,CAAAP,IAAA,CAAAA,IAAA;QACA;MACA,SAAAU,KAAA;QACA,IAAAA,KAAA,CAAAH,QAAA,IAAAG,KAAA,CAAAH,QAAA,CAAAI,MAAA;UACAC,OAAA,CAAAC,GAAA;UACA,KAAAV,aAAA;QACA;UACAS,OAAA,CAAAF,KAAA,cAAAA,KAAA;QACA;MACA;IACA;IAEAI,YAAAC,WAAA,EAAAC,QAAA;MACA,MAAAC,OAAA,QAAAd,aAAA,CAAAe,MAAA,CAAAC,IAAA;QACA,OAAAA,IAAA,CAAAC,WAAA,CAAAC,WAAA,GAAAC,QAAA,CAAAP,WAAA,CAAAM,WAAA,OACAF,IAAA,CAAAlB,UAAA,CAAAoB,WAAA,GAAAC,QAAA,CAAAP,WAAA,CAAAM,WAAA;MACA;MACAL,QAAA,CAAAC,OAAA;IACA;IAEAM,aAAAJ,IAAA;MACA,KAAAlB,UAAA,GAAAkB,IAAA,CAAAlB,UAAA;MACA,KAAAuB,eAAA;IACA;IAEA,MAAAA,gBAAA;MACA,UAAAvB,UAAA;QACA,KAAAwB,QAAA,CAAAC,OAAA;QACA;MACA;MAEA,KAAAxB,OAAA;;MAEA;MACA,IAAAyB,SAAA,QAAAC,gBAAA,MAAA3B,UAAA;MAEA,IAAA0B,SAAA;QACA;UACA;UACA,MAAApB,QAAA,SAAAT,KAAA,CAAAU,GAAA;YACAqB,MAAA;cAAAC,GAAA,OAAA7B;YAAA;UACA;UAEA,IAAAM,QAAA,CAAAP,IAAA,CAAAS,IAAA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;;YAEA,KAAAgB,QAAA,CAAAM,OAAA;YACA,KAAAC,OAAA,CAAAC,IAAA;cACAlC,IAAA;cACA8B,MAAA;gBAAAF;cAAA;cACAO,KAAA;gBAAAJ,GAAA,OAAA7B;cAAA;YACA;UACA;YACA,KAAAwB,QAAA,CAAAf,KAAA,CAAAH,QAAA,CAAAP,IAAA,CAAAmC,GAAA;UACA;QACA,SAAAzB,KAAA;UAAA,IAAA0B,eAAA;UACAxB,OAAA,CAAAF,KAAA,YAAAA,KAAA;UACA,KAAAe,QAAA,CAAAf,KAAA,iBAAA0B,eAAA,GAAA1B,KAAA,CAAAH,QAAA,cAAA6B,eAAA,gBAAAA,eAAA,GAAAA,eAAA,CAAApC,IAAA,cAAAoC,eAAA,uBAAAA,eAAA,CAAAD,GAAA,KAAAzB,KAAA,CAAA2B,OAAA;QACA;MACA;QACA,KAAAZ,QAAA,CAAAf,KAAA;MACA;MAEA,KAAAR,OAAA;IACA;IAEA0B,iBAAAE,GAAA;MACA,MAAAQ,KAAA;MACA,MAAAC,KAAA,GAAAT,GAAA,CAAAS,KAAA,CAAAD,KAAA;MACA,OAAAC,KAAA,GAAAA,KAAA;IACA;EACA;AACA","ignoreList":[]}]}