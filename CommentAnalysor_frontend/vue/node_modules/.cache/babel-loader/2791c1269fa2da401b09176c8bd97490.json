{"remainingRequest":"D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\src\\components\\Header.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\src\\components\\Header.vue","mtime":1747487445900},{"path":"D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\babel.config.js","mtime":1746756434702},{"path":"D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746972278158},{"path":"D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1746972279218},{"path":"D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746972278158},{"path":"D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1746972279591}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnSGVhZGVyJywKICBwcm9wczogewogICAgdXNlcjogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkZWZhdWx0QXZhdGFyOiByZXF1aXJlKCdAL2Fzc2V0cy9kZWZhdWx0LWF2YXRhci5wbmcnKSwKICAgICAgY3VycmVudExhbmc6ICd6aCcsCiAgICAgIGxhbmd1YWdlczogW3sKICAgICAgICB2YWx1ZTogJ3poJywKICAgICAgICBsYWJlbDogJ+S4reaWhycKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAnZW4nLAogICAgICAgIGxhYmVsOiAnRW5nbGlzaCcKICAgICAgfV0KICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgY29uc29sZS5sb2coJ0hlYWRlcue7hOS7tuWIm+W7uu+8jOeUqOaIt+S/oeaBrzonLCB0aGlzLnVzZXIpOwogICAgLy8g5LuObG9jYWxTdG9yYWdl6I635Y+W5L+d5a2Y55qE6K+t6KiA6K6+572uCiAgICBjb25zdCBzYXZlZExhbmcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGFuZ3VhZ2UnKTsKICAgIGlmIChzYXZlZExhbmcpIHsKICAgICAgdGhpcy5jdXJyZW50TGFuZyA9IHNhdmVkTGFuZzsKICAgICAgdGhpcy4kaTE4bi5sb2NhbGUgPSBzYXZlZExhbmc7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdXNlcjogewogICAgICBoYW5kbGVyKG5ld1ZhbCkgewogICAgICAgIGNvbnNvbGUubG9nKCdIZWFkZXLnu4Tku7bnlKjmiLfkv6Hmga/lj5jljJY6JywgbmV3VmFsKTsKICAgICAgfSwKICAgICAgaW1tZWRpYXRlOiB0cnVlCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVDb21tYW5kKGNvbW1hbmQpIHsKICAgICAgY29uc29sZS5sb2coJ+S4i+aLieiPnOWNleWRveS7pDonLCBjb21tYW5kKTsKICAgICAgaWYgKGNvbW1hbmQgPT09ICdwZXJzb24nKSB7CiAgICAgICAgdGhpcy5oYW5kbGVQZXJzb25DbGljaygpOwogICAgICB9IGVsc2UgaWYgKGNvbW1hbmQgPT09ICdsb2dvdXQnKSB7CiAgICAgICAgdGhpcy5oYW5kbGVMb2dvdXRDbGljaygpOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlUGVyc29uQ2xpY2soKSB7CiAgICAgIGNvbnNvbGUubG9nKCfngrnlh7vkuKrkurrkv6Hmga/mjInpkq4nKTsKICAgICAgaWYgKCF0aGlzLnVzZXIpIHsKICAgICAgICBjb25zb2xlLmxvZygn55So5oi35pyq55m75b2VJyk7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7flhYjnmbvlvZUnKTsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2xvZ2luJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKCflh4blpIfot7PovazliLDkuKrkurrkv6Hmga/pobXpnaInKTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9wZXJzb24nKS5jYXRjaChlcnIgPT4gewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+i3r+eUsei3s+i9rOWksei0pTonLCBlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVMb2dvdXRDbGljaygpIHsKICAgICAgLy8g5riF6Zmk55So5oi35L+h5oGvCiAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oInVzZXIiKTsKICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfpgIDlh7rmiJDlip8nKTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgfSwKICAgIGhhbmRsZUxhbmd1YWdlQ2hhbmdlKGxhbmcpIHsKICAgICAgLy8g5L+d5a2Y6K+t6KiA6K6+572u5YiwbG9jYWxTdG9yYWdlCiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsYW5ndWFnZScsIGxhbmcpOwogICAgICAvLyDmm7TmlrBpMThu55qE6K+t6KiA6K6+572uCiAgICAgIHRoaXMuJGkxOG4ubG9jYWxlID0gbGFuZzsKICAgICAgLy8g5pi+56S65YiH5o2i5oiQ5Yqf5o+Q56S6CiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhsYW5nID09PSAnemgnID8gJ+W3suWIh+aNouWIsOS4reaWhycgOiAnU3dpdGNoZWQgdG8gRW5nbGlzaCcpOwogICAgfQogIH0KfTs="},{"version":3,"names":["name","props","user","type","Object","default","data","defaultAvatar","require","currentLang","languages","value","label","created","console","log","savedLang","localStorage","getItem","$i18n","locale","watch","handler","newVal","immediate","methods","handleCommand","command","handlePersonClick","handleLogoutClick","$message","warning","$router","push","catch","err","error","sessionStorage","removeItem","success","handleLanguageChange","lang","setItem"],"sources":["src/components/Header.vue"],"sourcesContent":["<template>\n  <div style=\"height: 50px; line-height: 50px; border-bottom: 1px solid #ccc; display:flex;\" >\n    <div style=\"width: 200px; padding-left: 30px; font-weight: bold;color: dodgerblue \">\n      <el-select v-model=\"currentLang\" size=\"small\" @change=\"handleLanguageChange\" style=\"width: 100px;\">\n        <el-option\n          v-for=\"item in languages\"\n          :key=\"item.value\"\n          :label=\"item.label\"\n          :value=\"item.value\">\n        </el-option>\n      </el-select>\n    </div>\n    <div style=\"flex: 1\"></div>\n    <div style=\"width: 150px; display: flex; align-items: center; justify-content: flex-end;\">\n      <template v-if=\"user\">\n        <el-dropdown @command=\"handleCommand\">\n          <span class=\"el-dropdown-link\">\n            <el-avatar :size=\"30\" :src=\"user.avatar\" style=\"margin-right: 10px;\">\n              <img v-if=\"!user.avatar\" :src=\"defaultAvatar\" alt=\"\"/>\n            </el-avatar>\n            {{ user.nickName }}\n            <i class=\"el-icon-arrow-down el-icon--right\"></i>\n          </span>\n          <el-dropdown-menu slot=\"dropdown\">\n            <el-dropdown-item command=\"person\">{{ $t('header.personInfo') }}</el-dropdown-item>\n            <el-dropdown-item command=\"logout\">{{ $t('header.logout') }}</el-dropdown-item>\n          </el-dropdown-menu>\n        </el-dropdown>\n      </template>\n      <template v-else>\n        <el-button type=\"primary\" @click=\"$router.push('/login')\">{{ $t('header.login') }}</el-button>\n      </template>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Header',\n  props: {\n    user: {\n      type: Object,\n      default: null\n    }\n  },\n  data() {\n    return {\n      defaultAvatar: require('@/assets/default-avatar.png'),\n      currentLang: 'zh',\n      languages: [\n        { value: 'zh', label: '中文' },\n        { value: 'en', label: 'English' }\n      ]\n    }\n  },\n  created() {\n    console.log('Header组件创建，用户信息:', this.user)\n    // 从localStorage获取保存的语言设置\n    const savedLang = localStorage.getItem('language')\n    if (savedLang) {\n      this.currentLang = savedLang\n      this.$i18n.locale = savedLang\n    }\n  },\n  watch: {\n    user: {\n      handler(newVal) {\n        console.log('Header组件用户信息变化:', newVal)\n      },\n      immediate: true\n    }\n  },\n  methods: {\n    handleCommand(command) {\n      console.log('下拉菜单命令:', command)\n      if (command === 'person') {\n        this.handlePersonClick()\n      } else if (command === 'logout') {\n        this.handleLogoutClick()\n      }\n    },\n    handlePersonClick() {\n      console.log('点击个人信息按钮')\n      if (!this.user) {\n        console.log('用户未登录')\n        this.$message.warning('请先登录')\n        this.$router.push('/login')\n        return\n      }\n      console.log('准备跳转到个人信息页面')\n      this.$router.push('/person').catch(err => {\n        console.error('路由跳转失败:', err)\n      })\n    },\n    handleLogoutClick() {\n      // 清除用户信息\n      sessionStorage.removeItem(\"user\")\n      this.$message.success('退出成功')\n      this.$router.push('/login')\n    },\n    handleLanguageChange(lang) {\n      // 保存语言设置到localStorage\n      localStorage.setItem('language', lang)\n      // 更新i18n的语言设置\n      this.$i18n.locale = lang\n      // 显示切换成功提示\n      this.$message.success(lang === 'zh' ? '已切换到中文' : 'Switched to English')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.el-dropdown-link {\n  line-height: 50px;\n  cursor: pointer;\n  color: var(--el-color-primary);\n  display: flex;\n  align-items: center;\n}\n\n.el-dropdown {\n  border: none;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n}\n\n.el-dropdown-link {\n  border: none;\n  outline: none;\n}\n</style>"],"mappings":";AAqCA;EACAA,IAAA;EACAC,KAAA;IACAC,IAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;EACA;EACAC,KAAA;IACA;MACAC,aAAA,EAAAC,OAAA;MACAC,WAAA;MACAC,SAAA,GACA;QAAAC,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,KAAA;MAAA;IAEA;EACA;EACAC,QAAA;IACAC,OAAA,CAAAC,GAAA,0BAAAb,IAAA;IACA;IACA,MAAAc,SAAA,GAAAC,YAAA,CAAAC,OAAA;IACA,IAAAF,SAAA;MACA,KAAAP,WAAA,GAAAO,SAAA;MACA,KAAAG,KAAA,CAAAC,MAAA,GAAAJ,SAAA;IACA;EACA;EACAK,KAAA;IACAnB,IAAA;MACAoB,QAAAC,MAAA;QACAT,OAAA,CAAAC,GAAA,oBAAAQ,MAAA;MACA;MACAC,SAAA;IACA;EACA;EACAC,OAAA;IACAC,cAAAC,OAAA;MACAb,OAAA,CAAAC,GAAA,YAAAY,OAAA;MACA,IAAAA,OAAA;QACA,KAAAC,iBAAA;MACA,WAAAD,OAAA;QACA,KAAAE,iBAAA;MACA;IACA;IACAD,kBAAA;MACAd,OAAA,CAAAC,GAAA;MACA,UAAAb,IAAA;QACAY,OAAA,CAAAC,GAAA;QACA,KAAAe,QAAA,CAAAC,OAAA;QACA,KAAAC,OAAA,CAAAC,IAAA;QACA;MACA;MACAnB,OAAA,CAAAC,GAAA;MACA,KAAAiB,OAAA,CAAAC,IAAA,YAAAC,KAAA,CAAAC,GAAA;QACArB,OAAA,CAAAsB,KAAA,YAAAD,GAAA;MACA;IACA;IACAN,kBAAA;MACA;MACAQ,cAAA,CAAAC,UAAA;MACA,KAAAR,QAAA,CAAAS,OAAA;MACA,KAAAP,OAAA,CAAAC,IAAA;IACA;IACAO,qBAAAC,IAAA;MACA;MACAxB,YAAA,CAAAyB,OAAA,aAAAD,IAAA;MACA;MACA,KAAAtB,KAAA,CAAAC,MAAA,GAAAqB,IAAA;MACA;MACA,KAAAX,QAAA,CAAAS,OAAA,CAAAE,IAAA;IACA;EACA;AACA","ignoreList":[]}]}