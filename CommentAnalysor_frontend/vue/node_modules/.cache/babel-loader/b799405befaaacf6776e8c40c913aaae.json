{"remainingRequest":"D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\src\\views\\Login.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\src\\views\\Login.vue","mtime":1746951914866},{"path":"D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\babel.config.js","mtime":1746756434702},{"path":"D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746972278158},{"path":"D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1746972279218},{"path":"D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746972278158},{"path":"D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1746972279591}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTG9naW4nLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2dpbkZvcm06IHsKICAgICAgICB1c2VybmFtZTogJycsCiAgICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICAgIHJvbGU6ICd1c2VyJyAvLyDpu5jorqTpgInmi6nmma7pgJrnlKjmiLcKICAgICAgfSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgdXNlcm5hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXnlKjmiLflkI0nLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgcGFzc3dvcmQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXlr4bnoIEnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgcm9sZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqeeZu+W9lei6q+S7vScsCiAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICAgIH1dCiAgICAgIH0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVMb2dpbigpIHsKICAgICAgdGhpcy4kcmVmcy5sb2dpbkZvcm0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgIGNvbnN0IGxvZ2luVXJsID0gdGhpcy5sb2dpbkZvcm0ucm9sZSA9PT0gJ2FkbWluJyA/ICcvYWRtaW4vbG9naW4nIDogJy91c2VyL2xvZ2luJzsKICAgICAgICAgIGF4aW9zLnBvc3QobG9naW5VcmwsIHRoaXMubG9naW5Gb3JtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAnMCcpIHsKICAgICAgICAgICAgICAvLyDkv53lrZjnlKjmiLfkv6Hmga/liLBzZXNzaW9uU3RvcmFnZQogICAgICAgICAgICAgIGNvbnN0IHVzZXJEYXRhID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICAgICAgICB1c2VyRGF0YS5yb2xlID0gdGhpcy5sb2dpbkZvcm0ucm9sZTsgLy8g5re75Yqg6KeS6Imy5qCH6K+GCiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+eZu+W9leaIkOWKn++8jOS/neWtmOeahOeUqOaIt+S/oeaBrzonLCB1c2VyRGF0YSk7CiAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgndXNlcicsIEpTT04uc3RyaW5naWZ5KHVzZXJEYXRhKSk7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfnmbvlvZXmiJDlip8nKTsKCiAgICAgICAgICAgICAgLy8g5qC55o2u6KeS6Imy6Lez6L2s5Yiw5LiN5ZCM6aG16Z2iCiAgICAgICAgICAgICAgaWYgKHRoaXMubG9naW5Gb3JtLnJvbGUgPT09ICdhZG1pbicpIHsKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvYWRtaW4vZGFzaGJvYXJkJyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLmRhdGEubXNnIHx8ICfnmbvlvZXlpLHotKUnKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICB2YXIgX2Vycm9yJHJlc3BvbnNlOwogICAgICAgICAgICBjb25zb2xlLmVycm9yKCfnmbvlvZXlpLHotKU6JywgZXJyb3IpOwogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfnmbvlvZXlpLHotKU6ICcgKyAoKChfZXJyb3IkcmVzcG9uc2UgPSBlcnJvci5yZXNwb25zZSkgPT09IG51bGwgfHwgX2Vycm9yJHJlc3BvbnNlID09PSB2b2lkIDAgfHwgKF9lcnJvciRyZXNwb25zZSA9IF9lcnJvciRyZXNwb25zZS5kYXRhKSA9PT0gbnVsbCB8fCBfZXJyb3IkcmVzcG9uc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lcnJvciRyZXNwb25zZS5tc2cpIHx8IGVycm9yLm1lc3NhZ2UpKTsKICAgICAgICAgIH0pLmZpbmFsbHkoKCkgPT4gewogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["axios","name","data","loginForm","username","password","role","loading","rules","required","message","trigger","methods","handleLogin","$refs","validate","valid","loginUrl","post","then","res","code","userData","console","log","sessionStorage","setItem","JSON","stringify","$message","success","$router","push","error","msg","catch","_error$response","response","finally"],"sources":["src/views/Login.vue"],"sourcesContent":["<template>\r\n  <div class=\"login-container\">\r\n    <div class=\"login-box\">\r\n      <h2>JD评论分析系统</h2>\r\n      <el-form :model=\"loginForm\" :rules=\"rules\" ref=\"loginForm\" class=\"login-form\">\r\n        <el-form-item prop=\"role\">\r\n          <el-radio-group v-model=\"loginForm.role\" class=\"role-select\">\r\n            <el-radio label=\"user\">普通用户</el-radio>\r\n            <el-radio label=\"admin\">管理员</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item prop=\"username\">\r\n          <el-input \r\n            v-model=\"loginForm.username\" \r\n            prefix-icon=\"el-icon-user\"\r\n            placeholder=\"请输入用户名\">\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"password\">\r\n          <el-input \r\n            v-model=\"loginForm.password\" \r\n            prefix-icon=\"el-icon-lock\"\r\n            type=\"password\"\r\n            placeholder=\"请输入密码\"\r\n            @keyup.enter.native=\"handleLogin\">\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button \r\n            type=\"primary\" \r\n            class=\"login-button\" \r\n            :loading=\"loading\"\r\n            @click=\"handleLogin\">\r\n            登录\r\n          </el-button>\r\n        </el-form-item>\r\n        <div class=\"register-link\" v-if=\"loginForm.role === 'user'\">\r\n          还没有账号？<router-link to=\"/register\">立即注册</router-link>\r\n        </div>\r\n      </el-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'Login',\r\n  data() {\r\n    return {\r\n      loginForm: {\r\n        username: '',\r\n        password: '',\r\n        role: 'user' // 默认选择普通用户\r\n      },\r\n      loading: false,\r\n      rules: {\r\n        username: [\r\n          { required: true, message: '请输入用户名', trigger: 'blur' }\r\n        ],\r\n        password: [\r\n          { required: true, message: '请输入密码', trigger: 'blur' }\r\n        ],\r\n        role: [\r\n          { required: true, message: '请选择登录身份', trigger: 'change' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    handleLogin() {\r\n      this.$refs.loginForm.validate((valid) => {\r\n        if (valid) {\r\n          this.loading = true;\r\n          const loginUrl = this.loginForm.role === 'admin' ? '/admin/login' : '/user/login';\r\n          \r\n          axios.post(loginUrl, this.loginForm).then(res => {\r\n            if (res.data.code === '0') {\r\n              // 保存用户信息到sessionStorage\r\n              const userData = res.data.data;\r\n              userData.role = this.loginForm.role; // 添加角色标识\r\n              console.log('登录成功，保存的用户信息:', userData);\r\n              sessionStorage.setItem('user', JSON.stringify(userData));\r\n              this.$message.success('登录成功');\r\n              \r\n              // 根据角色跳转到不同页面\r\n              if (this.loginForm.role === 'admin') {\r\n                this.$router.push('/admin/dashboard');\r\n              } else {\r\n                this.$router.push('/');\r\n              }\r\n            } else {\r\n              this.$message.error(res.data.msg || '登录失败');\r\n            }\r\n          }).catch(error => {\r\n            console.error('登录失败:', error);\r\n            this.$message.error('登录失败: ' + (error.response?.data?.msg || error.message));\r\n          }).finally(() => {\r\n            this.loading = false;\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.login-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100vh;\r\n  background-color: #f5f7fa;\r\n}\r\n\r\n.login-box {\r\n  width: 400px;\r\n  padding: 40px;\r\n  background-color: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n}\r\n\r\nh2 {\r\n  text-align: center;\r\n  color: #409EFF;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.login-form {\r\n  margin-top: 20px;\r\n}\r\n\r\n.role-select {\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.login-button {\r\n  width: 100%;\r\n}\r\n\r\n.register-link {\r\n  text-align: center;\r\n  margin-top: 15px;\r\n  font-size: 14px;\r\n}\r\n\r\n.register-link a {\r\n  color: #409EFF;\r\n  text-decoration: none;\r\n}\r\n\r\n.register-link a:hover {\r\n  text-decoration: underline;\r\n}\r\n</style> "],"mappings":";AA6CA,OAAAA,KAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,SAAA;QACAC,QAAA;QACAC,QAAA;QACAC,IAAA;MACA;MACAC,OAAA;MACAC,KAAA;QACAJ,QAAA,GACA;UAAAK,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAN,QAAA,GACA;UAAAI,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAL,IAAA,GACA;UAAAG,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MAEA;IACA;EACA;EACAC,OAAA;IACAC,YAAA;MACA,KAAAC,KAAA,CAAAX,SAAA,CAAAY,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA,KAAAT,OAAA;UACA,MAAAU,QAAA,QAAAd,SAAA,CAAAG,IAAA;UAEAN,KAAA,CAAAkB,IAAA,CAAAD,QAAA,OAAAd,SAAA,EAAAgB,IAAA,CAAAC,GAAA;YACA,IAAAA,GAAA,CAAAlB,IAAA,CAAAmB,IAAA;cACA;cACA,MAAAC,QAAA,GAAAF,GAAA,CAAAlB,IAAA,CAAAA,IAAA;cACAoB,QAAA,CAAAhB,IAAA,QAAAH,SAAA,CAAAG,IAAA;cACAiB,OAAA,CAAAC,GAAA,kBAAAF,QAAA;cACAG,cAAA,CAAAC,OAAA,SAAAC,IAAA,CAAAC,SAAA,CAAAN,QAAA;cACA,KAAAO,QAAA,CAAAC,OAAA;;cAEA;cACA,SAAA3B,SAAA,CAAAG,IAAA;gBACA,KAAAyB,OAAA,CAAAC,IAAA;cACA;gBACA,KAAAD,OAAA,CAAAC,IAAA;cACA;YACA;cACA,KAAAH,QAAA,CAAAI,KAAA,CAAAb,GAAA,CAAAlB,IAAA,CAAAgC,GAAA;YACA;UACA,GAAAC,KAAA,CAAAF,KAAA;YAAA,IAAAG,eAAA;YACAb,OAAA,CAAAU,KAAA,UAAAA,KAAA;YACA,KAAAJ,QAAA,CAAAI,KAAA,eAAAG,eAAA,GAAAH,KAAA,CAAAI,QAAA,cAAAD,eAAA,gBAAAA,eAAA,GAAAA,eAAA,CAAAlC,IAAA,cAAAkC,eAAA,uBAAAA,eAAA,CAAAF,GAAA,KAAAD,KAAA,CAAAvB,OAAA;UACA,GAAA4B,OAAA;YACA,KAAA/B,OAAA;UACA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]}]}