{"remainingRequest":"D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\src\\components\\Header.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\src\\components\\Header.vue","mtime":1747487445900},{"path":"D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746972278158},{"path":"D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1746972279218},{"path":"D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746972278158},{"path":"D:\\学习资料\\软件工程\\demo2\\CommentAnalysor_frontend\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1746972279591}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnSGVhZGVyJywKICBwcm9wczogewogICAgdXNlcjogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkZWZhdWx0QXZhdGFyOiByZXF1aXJlKCdAL2Fzc2V0cy9kZWZhdWx0LWF2YXRhci5wbmcnKSwKICAgICAgY3VycmVudExhbmc6ICd6aCcsCiAgICAgIGxhbmd1YWdlczogWwogICAgICAgIHsgdmFsdWU6ICd6aCcsIGxhYmVsOiAn5Lit5paHJyB9LAogICAgICAgIHsgdmFsdWU6ICdlbicsIGxhYmVsOiAnRW5nbGlzaCcgfQogICAgICBdCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgY29uc29sZS5sb2coJ0hlYWRlcue7hOS7tuWIm+W7uu+8jOeUqOaIt+S/oeaBrzonLCB0aGlzLnVzZXIpCiAgICAvLyDku45sb2NhbFN0b3JhZ2Xojrflj5bkv53lrZjnmoTor63oqIDorr7nva4KICAgIGNvbnN0IHNhdmVkTGFuZyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsYW5ndWFnZScpCiAgICBpZiAoc2F2ZWRMYW5nKSB7CiAgICAgIHRoaXMuY3VycmVudExhbmcgPSBzYXZlZExhbmcKICAgICAgdGhpcy4kaTE4bi5sb2NhbGUgPSBzYXZlZExhbmcKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICB1c2VyOiB7CiAgICAgIGhhbmRsZXIobmV3VmFsKSB7CiAgICAgICAgY29uc29sZS5sb2coJ0hlYWRlcue7hOS7tueUqOaIt+S/oeaBr+WPmOWMljonLCBuZXdWYWwpCiAgICAgIH0sCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlQ29tbWFuZChjb21tYW5kKSB7CiAgICAgIGNvbnNvbGUubG9nKCfkuIvmi4noj5zljZXlkb3ku6Q6JywgY29tbWFuZCkKICAgICAgaWYgKGNvbW1hbmQgPT09ICdwZXJzb24nKSB7CiAgICAgICAgdGhpcy5oYW5kbGVQZXJzb25DbGljaygpCiAgICAgIH0gZWxzZSBpZiAoY29tbWFuZCA9PT0gJ2xvZ291dCcpIHsKICAgICAgICB0aGlzLmhhbmRsZUxvZ291dENsaWNrKCkKICAgICAgfQogICAgfSwKICAgIGhhbmRsZVBlcnNvbkNsaWNrKCkgewogICAgICBjb25zb2xlLmxvZygn54K55Ye75Liq5Lq65L+h5oGv5oyJ6ZKuJykKICAgICAgaWYgKCF0aGlzLnVzZXIpIHsKICAgICAgICBjb25zb2xlLmxvZygn55So5oi35pyq55m75b2VJykKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+WFiOeZu+W9lScpCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpCiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgY29uc29sZS5sb2coJ+WHhuWkh+i3s+i9rOWIsOS4quS6uuS/oeaBr+mhtemdoicpCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvcGVyc29uJykuY2F0Y2goZXJyID0+IHsKICAgICAgICBjb25zb2xlLmVycm9yKCfot6/nlLHot7PovazlpLHotKU6JywgZXJyKQogICAgICB9KQogICAgfSwKICAgIGhhbmRsZUxvZ291dENsaWNrKCkgewogICAgICAvLyDmuIXpmaTnlKjmiLfkv6Hmga8KICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgidXNlciIpCiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn6YCA5Ye65oiQ5YqfJykKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpCiAgICB9LAogICAgaGFuZGxlTGFuZ3VhZ2VDaGFuZ2UobGFuZykgewogICAgICAvLyDkv53lrZjor63oqIDorr7nva7liLBsb2NhbFN0b3JhZ2UKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2xhbmd1YWdlJywgbGFuZykKICAgICAgLy8g5pu05pawaTE4bueahOivreiogOiuvue9rgogICAgICB0aGlzLiRpMThuLmxvY2FsZSA9IGxhbmcKICAgICAgLy8g5pi+56S65YiH5o2i5oiQ5Yqf5o+Q56S6CiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhsYW5nID09PSAnemgnID8gJ+W3suWIh+aNouWIsOS4reaWhycgOiAnU3dpdGNoZWQgdG8gRW5nbGlzaCcpCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["Header.vue"],"names":[],"mappings":";AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Header.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div style=\"height: 50px; line-height: 50px; border-bottom: 1px solid #ccc; display:flex;\" >\n    <div style=\"width: 200px; padding-left: 30px; font-weight: bold;color: dodgerblue \">\n      <el-select v-model=\"currentLang\" size=\"small\" @change=\"handleLanguageChange\" style=\"width: 100px;\">\n        <el-option\n          v-for=\"item in languages\"\n          :key=\"item.value\"\n          :label=\"item.label\"\n          :value=\"item.value\">\n        </el-option>\n      </el-select>\n    </div>\n    <div style=\"flex: 1\"></div>\n    <div style=\"width: 150px; display: flex; align-items: center; justify-content: flex-end;\">\n      <template v-if=\"user\">\n        <el-dropdown @command=\"handleCommand\">\n          <span class=\"el-dropdown-link\">\n            <el-avatar :size=\"30\" :src=\"user.avatar\" style=\"margin-right: 10px;\">\n              <img v-if=\"!user.avatar\" :src=\"defaultAvatar\" alt=\"\"/>\n            </el-avatar>\n            {{ user.nickName }}\n            <i class=\"el-icon-arrow-down el-icon--right\"></i>\n          </span>\n          <el-dropdown-menu slot=\"dropdown\">\n            <el-dropdown-item command=\"person\">{{ $t('header.personInfo') }}</el-dropdown-item>\n            <el-dropdown-item command=\"logout\">{{ $t('header.logout') }}</el-dropdown-item>\n          </el-dropdown-menu>\n        </el-dropdown>\n      </template>\n      <template v-else>\n        <el-button type=\"primary\" @click=\"$router.push('/login')\">{{ $t('header.login') }}</el-button>\n      </template>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Header',\n  props: {\n    user: {\n      type: Object,\n      default: null\n    }\n  },\n  data() {\n    return {\n      defaultAvatar: require('@/assets/default-avatar.png'),\n      currentLang: 'zh',\n      languages: [\n        { value: 'zh', label: '中文' },\n        { value: 'en', label: 'English' }\n      ]\n    }\n  },\n  created() {\n    console.log('Header组件创建，用户信息:', this.user)\n    // 从localStorage获取保存的语言设置\n    const savedLang = localStorage.getItem('language')\n    if (savedLang) {\n      this.currentLang = savedLang\n      this.$i18n.locale = savedLang\n    }\n  },\n  watch: {\n    user: {\n      handler(newVal) {\n        console.log('Header组件用户信息变化:', newVal)\n      },\n      immediate: true\n    }\n  },\n  methods: {\n    handleCommand(command) {\n      console.log('下拉菜单命令:', command)\n      if (command === 'person') {\n        this.handlePersonClick()\n      } else if (command === 'logout') {\n        this.handleLogoutClick()\n      }\n    },\n    handlePersonClick() {\n      console.log('点击个人信息按钮')\n      if (!this.user) {\n        console.log('用户未登录')\n        this.$message.warning('请先登录')\n        this.$router.push('/login')\n        return\n      }\n      console.log('准备跳转到个人信息页面')\n      this.$router.push('/person').catch(err => {\n        console.error('路由跳转失败:', err)\n      })\n    },\n    handleLogoutClick() {\n      // 清除用户信息\n      sessionStorage.removeItem(\"user\")\n      this.$message.success('退出成功')\n      this.$router.push('/login')\n    },\n    handleLanguageChange(lang) {\n      // 保存语言设置到localStorage\n      localStorage.setItem('language', lang)\n      // 更新i18n的语言设置\n      this.$i18n.locale = lang\n      // 显示切换成功提示\n      this.$message.success(lang === 'zh' ? '已切换到中文' : 'Switched to English')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.el-dropdown-link {\n  line-height: 50px;\n  cursor: pointer;\n  color: var(--el-color-primary);\n  display: flex;\n  align-items: center;\n}\n\n.el-dropdown {\n  border: none;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n}\n\n.el-dropdown-link {\n  border: none;\n  outline: none;\n}\n</style>"]}]}